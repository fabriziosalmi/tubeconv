<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TubeConv - YouTube to MP3 Converter</title>
    <meta name="description" content="Convert YouTube videos to high-quality MP3 files. Fast, secure, and free YouTube to MP3 converter.">
    
    <!-- PWA Meta Tags -->
    <meta name="theme-color" content="#4f46e5">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="app-container">
        <!-- Compact Header -->
        <header class="header">
            <div class="nav-brand">
                <div class="logo">
                    <svg width="28" height="28" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect width="32" height="32" rx="8" fill="url(#gradient)"/>
                        <path d="M8 12L16 8L24 12V20L16 24L8 20V12Z" stroke="white" stroke-width="2" fill="none"/>
                        <circle cx="16" cy="16" r="3" fill="white"/>
                        <defs>
                            <linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse">
                                <stop stop-color="#4f46e5"/>
                                <stop offset="1" stop-color="#7c3aed"/>
                            </linearGradient>
                        </defs>
                    </svg>
                    <h1>TubeConv</h1>
                </div>
            </div>
            
            <nav class="nav-menu">
                <a href="/api-docs" class="nav-link" target="_blank" title="Open Swagger API Documentation">
                    <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
                    </svg>
                    API Docs
                </a>
            </nav>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Converter Section -->
            <div class="converter-section" id="converterSection">
                <!-- Input Section -->
                <div class="input-section" id="inputSection">
                    <!-- Usage Guide -->
                    <div class="usage-guide">
                        <ol>
                            <li>Paste YouTube URL</li>
                            <li>Click on Convert to MP3</li>
                            <li>Download MP3</li>
                        </ol>
                    </div>
                    
                    <div class="main-form">
                        <div class="input-group">
                            <input 
                                type="url" 
                                id="urlInput" 
                                placeholder="Paste YouTube URL here..."
                                class="url-input"
                                spellcheck="false"
                                autocomplete="off"
                            >
                            
                            <!-- Audio Quality Settings Bar - directly below URL input -->
                            <div class="quality-bar">
                                <label class="quality-label">Audio Quality:</label>
                                <div class="quality-options">
                                    <label class="radio-option">
                                        <input type="radio" name="audioQuality" value="128">
                                        <span class="radio-custom"></span>
                                        <span class="quality-text">128 kbps</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="audioQuality" value="192">
                                        <span class="radio-custom"></span>
                                        <span class="quality-text">192 kbps</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="audioQuality" value="256">
                                        <span class="radio-custom"></span>
                                        <span class="quality-text">256 kbps</span>
                                    </label>
                                    <label class="radio-option">
                                        <input type="radio" name="audioQuality" value="320" checked>
                                        <span class="radio-custom"></span>
                                        <span class="quality-text">320 kbps</span>
                                    </label>
                                </div>
                            </div>
                            
                            <button id="convertBtn" class="convert-btn" disabled>
                                <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 3L15 8H12V15H8V8H5L10 3Z"/>
                                </svg>
                                Convert to MP3
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Preview Section - DISABLED: Direct conversion without preview -->
                <div class="section preview-section" id="previewSection" style="display: none !important;">
                    <!-- Preview content removed - direct conversion enabled -->
                </div>

                <!-- Loading Section -->
                <div class="section loading-section" id="loadingSection">
                    <div class="loading-content">
                        <div class="loading-spinner">
                            <div class="spinner"></div>
                        </div>
                        <h3 class="loading-text">Converting your video...</h3>
                        <div class="loading-steps">
                            <div class="step active" id="step1">
                                <div class="step-indicator"></div>
                                <span>Downloading</span>
                            </div>
                            <div class="step" id="step2">
                                <div class="step-indicator"></div>
                                <span>Converting</span>
                            </div>
                            <div class="step" id="step3">
                                <div class="step-indicator"></div>
                                <span>Finalizing</span>
                            </div>
                        </div>
                        <div class="progress-container">
                            <div class="progress-bar-container">
                                <div id="progressBar" class="progress-bar"></div>
                                <div id="progressText" class="progress-text">0%</div>
                            </div>
                            <div class="eta-display">
                                <span class="eta-text">ETA: <span id="etaTime">--</span></span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Result Section -->
                <div class="section result-section" id="resultSection">
                    <div class="result-card">
                        <div class="video-info-card">
                            <div class="thumbnail-container">
                                <img id="videoThumbnail" class="thumbnail" alt="Video thumbnail">
                                <div class="play-overlay">
                                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                                        <path d="M8 5v14l11-7z"/>
                                    </svg>
                                </div>
                            </div>
                            <div class="video-details">
                                <h2 id="videoTitle" class="video-title"></h2>
                                <div class="video-meta">
                                    <div class="meta-item">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                        </svg>
                                        <span>Successfully converted</span>
                                    </div>
                                    <div class="meta-item">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 6c.55 0 1 .45 1 1v6c0 .55-.45 1-1 1s-1-.45-1-1V9c0-.55.45-1 1-1zm0-4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1z"/>
                                        </svg>
                                        <span id="videoDuration" class="duration"></span>
                                    </div>
                                    <div class="meta-item">
                                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                                            <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
                                        </svg>
                                        <span id="audioQualityDisplay" class="quality"></span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="download-actions">
                            <button id="downloadBtn" class="download-btn primary">
                                <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M10 12L15 7H12V3H8V7H5L10 12Z"/>
                                    <path d="M3 15H17V17H3V15Z"/>
                                </svg>
                                Download MP3
                            </button>
                            <button id="convertAnotherBtn" class="convert-another-btn secondary">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm5 11h-4v4h-2v-4H7v-2h4V7h2v4h4v2z"/>
                                </svg>
                                Convert Another
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Error Section -->
                <div class="section error-section" id="errorSection">
                    <div class="error-content">
                        <div class="error-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="currentColor">
                                <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z"/>
                            </svg>
                        </div>
                        <h3 class="error-title">Conversion Failed</h3>
                        <p id="errorMessage" class="error-message">
                            Something went wrong during the conversion process.
                        </p>
                        <button id="tryAgainBtn" class="try-again-btn">
                            Try Again
                        </button>
                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>Made with love ❤️ by Fabrizio Salmi
                <a href="https://github.com/fabriziosalmi/tubeconv" target="_blank" rel="noopener noreferrer" class="source-link" title="View source code on GitHub">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
                    </svg>
                </a>
            </p>
        </footer>
    </div>

    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="script.js"></script>
    <script src="analytics.js"></script>
</body>
</html>
